---
layout: post
title: What is lvh.me?
---

I've seen urls like `something.lvh.me` loads of times at work as we use account specific domains.
I've never used it personally as I always use [puma-dev](https://github.com/puma/puma-dev) so that I can use 
`something.ourcompany.dev` to access my dev server [^1]. I see `lvh.me` commonly enough
that I've never really questioned what it is. I've even naively assumed, albeit it lightly,
that it's something specific to our company.

I've been working on a little side project in which I wanted to have account specific subdomains.
I'd implemented the basic mechanics of this and it appeared to be working until I wanted to try and
grab the subdomain from the request object in a before action hook. I was just trying to log the result
of `request.subdomain`, but for some reason it seemed to be coming back as nil. After a little searching,
I learned that this is because `localhost` isn't really a domain. Instead `localhost` is a hostname which
resolves to the loopback interface. If you want to support subdomains on `localhost` you need to specifically
add it to your local DNS resolver. In my case that means adding the following to `/etc/hosts`:

```
127.0.0.1    somename.myapp.test
```

`/etc/hosts` doesn't support wildcards though, so you'd either need to add an entry for every single subdomain, which
is not really possibly if you want to support dynamic, user defined custom subdomains, or use a local DNS service.

One of the possible solutions I happened upon was to use `lvh.me` rather than localhost. So it's nothing to do with my work specifically!

![Photo by <a href="https://unsplash.com/@kierinsightarchives?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Kier in Sight Archives</a> on <a href="https://unsplash.com/photos/brown-rope-on-blue-textile-2TwvNp2kw78?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>](/assets/loop.jpg)

After a little more research I found that `lvh` stands for local virtual host while `me` is technically the TLD for Montenegro,
but it's commonly used enough by people wanting a cool looking domain that it's treated as a generic TLD.
Somebody owns the domain and has registered the DNS record to resolve to none other than 127.0.0.1 - the loopback interface
on your computer, just like `localhost`.

At some point in 2021 the [domain name expired causing mild chaos...](https://news.ycombinator.com/item?id=27423972)

There are several other commonly used domains apparently, such as `readme.localtest.me` or you could buy your own domain
and do the trick yourself. It seems the origins of "shared" loopback domains may be the [venerable tpope](https://tbaggery.com/2010/03/04/smack-a-ho-st.html)?

For some reason I was mind blown by this discovery. Sufficiently mind blown that I felt I needed to write about it.

[^1]: I shouldn't really be doing this any more as `.dev` is nowadays a real top level domain owned by google. This
    wrinkle necessitates that I fiddle with the macOS DNS resolver so that `ourcompany.dev`
    resolves to `localhost`, but things like [hotwired.dev](https://hotwired.dev) don't!


---

Photo by <a href="https://unsplash.com/@kierinsightarchives?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Kier in Sight Archives</a> on <a href="https://unsplash.com/photos/brown-rope-on-blue-textile-2TwvNp2kw78?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
      
